import{H as d,r as s,E as m,I as p,v as g}from"./DeoSQKGc.js";import{u as D}from"./BgMDfBSU.js";const P=d("room",()=>{const a=s({}),i=s(1e3),n=s(1),r=s(1),e=m({date:{start:new Date().toISOString().split("T")[0],end:null},minDate:new Date,maxDate:new Date(new Date().setFullYear(new Date().getFullYear()+1))}),l=p(()=>{const t=a.value.price||1,c=r.value||1,u=i.value||1;return t*c-u});return{roomData:a,bookingPeople:n,daysCount:r,bookingDate:e,discount:i,totalPrice:l,setRoomData:t=>{a.value=t},setBookingPeople:t=>{n.value=t},setDaysCount:t=>{r.value=t},setBookingDate:t=>{e.date.start=t.start,e.date.end=t.end},pushBooking:async t=>{const c=D("auth"),u={roomId:a.value._id,checkInDate:e.date.start,checkOutDate:e.date.end,peopleNum:n.value,userInfo:JSON.parse(JSON.stringify(t))};try{const o=g();return await $fetch("/orders/",{baseURL:o.public.apiBase,method:"post",body:u,headers:{Authorization:c.value}})}catch(o){o.data?(console.log("API 回應錯誤內容:",o.data),alert(o.data.message)):alert("登入失敗，伺服器未返回詳細資訊！")}}}});export{P as u};
